[{"content":"Recently whilst looking through the Power Platform build tools, I stumbled upon a task which I didn\u0026rsquo;t recognise called \u0026ldquo;Update Org settings\u0026rdquo;: .\nThis appears to be an undocumented task, but on closer inspection, it looks to be a wrapper around the update-settings command found in the PAC CLI tools. Unfortunately this also seems quite \u0026ldquo;light\u0026rdquo; on information, so I decided to investigate further.\nSelecting my development environment and running pac org list-settings, I get a list of environment settings, neat! I can now pick out any of these settings and use them in the update-settings command. Something to note is that the parameter expects true or false values rather than Yes or No which the list-settings results suggest.\nIn my test, I wanted to enable code components for Canvas Apps in my environment, we can see the setting under Environment features: The setting I found in the list-settngs parameter which matched most closely was: iscustomcontrolsincanvasappsenabled\nLets give this a go and see if it works:\nThis looks promising, lets check the setting in Environment Admin\u0026hellip; Nice!\nSo now that we have this working with the PAC CLI commands, lets see how this works within Power Platform Build tools tasks for Azure Devops pipelines. Using the same example as we used with PAC CLI to enable code components in Canvas Apps, we can add the Update Org Settings build tools task in our pipeline to achieve the same results.\nWhen selecting the update org settings build tools task, it will ask for 3 settings: Service Connection, Setting Name, and Setting value.\nFor Service connection, use whichever method you have configured to authenticate to your Power Platform Environment. If not using them already, I would reccomend using a service principle for your pipelines, however. I have a blog post for setitngs these up which you can read here.\nThe Setting name will be the same settings which we discovered in the PAC CLI List-Settings task, so in our example, we will set it to iscustomcontrolsincanvasappsenabled and the Setting value will need to be set to either true or false. In my example I set it to true. Click add to add the YAML code to the pipeline, and you should see something similar to this:\n1 2 3 4 5 6 - task: PowerPlatformUpdateOrgSettings@2 inputs: authenticationType: \u0026#39;PowerPlatformSPN\u0026#39; PowerPlatformSPN: \u0026#39;MyServiceConnection\u0026#39; Name: \u0026#39;iscustomcontrolsincanvasappsenabled\u0026#39; Value: \u0026#39;true\u0026#39; Now, if we add this task to part of an environment creation process, we can start to automate our preconfiguration of Environments to further enhance our Environment lifecycle processes. Using the above YAML in our pipeline, we can add this to a Create Environment task to make this possible:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 trigger: - main pool: vmImage: ubuntu-latest steps: - task: PowerPlatformToolInstaller@2 inputs: DefaultVersion: true - task: PowerPlatformCreateEnvironment@2 inputs: authenticationType: \u0026#39;PowerPlatformSPN\u0026#39; PowerPlatformSPN: \u0026#39;MyServiceConnection\u0026#39; DisplayName: \u0026#39;TestEnvironment\u0026#39; EnvironmentSku: \u0026#39;Sandbox\u0026#39; LocationName: \u0026#39;unitedkingdom\u0026#39; LanguageName: \u0026#39;English\u0026#39; CurrencyName: \u0026#39;GBP\u0026#39; DomainName: \u0026#39;TestEnvironment\u0026#39; - task: PowerPlatformUpdateOrgSettings@2 inputs: authenticationType: \u0026#39;PowerPlatformSPN\u0026#39; PowerPlatformSPN: \u0026#39;MyServiceConnection\u0026#39; Name: \u0026#39;iscustomcontrolsincanvasappsenabled\u0026#39; Value: \u0026#39;true\u0026#39; When we run this pipeline, a new Environment called TestEnvironment will be created, and it will have the Custom code components for Canvas Apps enabled. Runinng the pipeline, we can see it has run sucessfully:\nNow when we check the created environment, the setting should be enabled:\nHopefully this has been helpful, and this should come in handy when spinning up new developer environments and allowing for these environments to be more disposable as part of a healthy ALM process and environment strategy.\n","date":"2023-08-30T00:00:00Z","image":"https://joshlgiles.com/p/update-org-settings-in-power-platform-build-tools/Software_hu59b20b477dc8818f393e23d9da349009_101123_120x120_fill_q75_box_smart1.jpg","permalink":"https://joshlgiles.com/p/update-org-settings-in-power-platform-build-tools/","title":"Update Org settings in Power Platform build tools"},{"content":"Introduction Power Pages is a helpful tool that makes it easy to create websites using low-code development. It also allows for rich integration with other Power Platform solutions.\nRecently, I had a requirement to use editable grids within Power Pages for list data. I managed to find some documentation on using code components for Power Pages here: https://learn.microsoft.com/en-us/power-pages/configure/tutorial-pcf-code\nReading this, I found it confusing to understand as I felt it lacked clarity on whether you could in fact use editable grids.\nTo help streamline the process and save you time, I have put together a quick guide on how to use an editable grid in your Power Pages lists.\nAdd the Editable Grid component to your desired table I am using the Accounts table with a solution called \u0026ldquo;Test solution\u0026rdquo; for this demonstration.\nWithin your solution, navigate to Tables and then the ellipses and click \u0026ldquo;Switch to Classic\u0026rdquo;. Double click the Account Table (also called Entity). Click the Controls tab and then Add Control\u0026hellip; In the Add control menu, search for and select the PowerApps grid control, then click Add. Ensure that the Power Apps grid control is enabled for Web and Phone/Tablet if required. Select the control to bring up the properties. Set the value of Enable editing to \u0026ldquo;Yes\u0026rdquo;. You can enable other properties too if required, and I recommend you check out the documentation to find out which each property does. Click Save, and then click Publish Add the component to Portal Management Now we have our editable grid added to our table, we need to configure Power Pages to use it. The first step is to add a new List so it can then be selected when adding it to our page.\nNavigate to make.powerpages.microsoft.com Select the elipses against your site and select Portal management Under Content, go to Lists, click New Give your List a Name, select the Table, and the website Add your views Make sure that Use a configured code component is set to yes. You can change other properties here as needed, and then click Save and Close Add the editable grid to your page The final step is to add the list to our page and test it out.\nnavigate back to your Power Page site and edit it go to the page where you wish to add the editable grid. In my example I have a test page called Temp Add a List to the page under the Choose a component to add to this section Select the existing list we added in the previous steps, in my case it\u0026rsquo;s the Test view with Grid Sync and preview your page, you should now see the editable grid displayed in the preview page. Conclusion We should now be able to see our editable grid component in action:\nYour browser doesn't support HTML5 video. Here is a link to the video instead. In this quick tutorial I have demonstrated how you can quickly set up a List in Power Pages to use the editable grid component.\nI hope this has been helpful and saves you some time if you ever need to add an editable grid to your Power Pages site. If you have any feedback, feel free to leave a comment below.\n","date":"2023-05-03T00:00:00Z","image":"https://joshlgiles.com/p/create-out-of-the-box-editable-grids-in-powerpages/Software_hu59b20b477dc8818f393e23d9da349009_101123_120x120_fill_q75_box_smart1.jpg","permalink":"https://joshlgiles.com/p/create-out-of-the-box-editable-grids-in-powerpages/","title":"Create editable grids in Power Pages without using code"},{"content":"Power Platform Build tools offer a great way to manage Continuous Integration and Continuous Deployment(CI/CD) within Azure DevOps. Storing Solutions as code and working collaboratively using these tools is just some of the many benefits offered by making use of these tools and forms a key part of the overall Application Lifecycle Management(ALM). See https://learn.microsoft.com/en-us/power-platform/alm/(https://learn.microsoft.com/en-us/power-platform/alm/ for a more in-depth overview of ALM for Power platform.\nWhen exporting a solution from an Environment, it is good practice to set solution version to enable solutions to be tracked more easily and track what functionality is included in a release.\nUp until recently, I had run into a bit of a roadblock where I was unable to set a solution version when using a service connection which had a different default environment set compared to the environment I was wanting to target. After much head scratching, I actually found that although the build tools do not specify that you can set an Environment to target, you can in fact target an Environment if you specify the parameter and ignore the warning!\nHere\u0026rsquo;s an example of the task:\n1 2 3 4 5 6 7 - task: PowerPlatformSetSolutionVersion@2 inputs: authenticationType: \u0026#39;PowerPlatformSPN\u0026#39; PowerPlatformSPN: \u0026#39;My Service Connection (Default)\u0026#39; Environment: ${{ parameters.Environment }} SolutionName: ${{ variables.SolutionName}} SolutionVersionNumber: ${{ variables.VersionNumber}} What we see above is the addition of the \u0026ldquo;Environment\u0026rdquo; Parameter which is not specified in documentation and when you add it to your task it will give the squiggly line of doom. To provide further context, I am specifying my Environment as a runtime parameter and my Solution Name as a variable. My version number is set by using a variable and specifying the Azure DevOps build number in the pipeline: $(Build.BuildNumber). My Environments have the Service connection (App registration) already added to them with relevant permissions, so that I can target them with no issues.\nI\u0026rsquo;ve raised an issue on the Power Platform Build tools so hopefully this will be fixed soon to make it more obvious that you can in fact target different environments with this task. You can view the issue here\nYou can read more about Parameters here and Variables here\nTo summarise, being able to set a the solution version of your exported solutions and targeting your environments is great as it\u0026rsquo;s yet another aspect of CI/CD that you can configure.\n","date":"2023-03-10T00:00:00Z","image":"https://joshlgiles.com/p/use-the-set-solution-version-task-power-platform-build-tools-task-in-azure-devops/Software_hu59b20b477dc8818f393e23d9da349009_101123_120x120_fill_q75_box_smart1.jpg","permalink":"https://joshlgiles.com/p/use-the-set-solution-version-task-power-platform-build-tools-task-in-azure-devops/","title":"Use the Set Solution version task Power Platform Build tools task in Azure Devops"},{"content":"If you are new to Power Platform Build tools and how it can facilitate Continuous Integration/Continuous Development (CI/CD), it can be very daunting to understand where to start and how to get up and running.\nMicrosoft\u0026rsquo;s Documentation is great for gaining an understanding of how to get up and runnign using Azure DevOps, hower the documentation doesn\u0026rsquo;t seem to be the most up to date, as examples are still using classic pipelines (instead of YAML), and the documentation doesn\u0026rsquo;t appear to contain any information on some of the latest functionality that has been introduced recently (which is a shame as it\u0026rsquo;s great!)\nIn this post I would like to highlight the benefits of service connections in Azure Devops when working with PowerPlatform Build Tools and hopefully simplify the process of using service connections to target different environments when working with CI/CD.\nI won\u0026rsquo;t cover how to setup a Service Principle, as this has been covered plenty already, and The documentation also goes over this in good detail, see here\nAdding a service connection to Azure DevOps is a straightforward procedure:\nStep 1: Within your Azure DevOps Project, go to \u0026ldquo;Project Settings\u0026rdquo;\nStep 2: Select \u0026ldquo;Service Connections\u0026rdquo;\nStep 3: Search for Power Platform in the Service connections list and click \u0026ldquo;Next\u0026rdquo;\nStep 4: Select \u0026ldquo;Application Id and Client Secret\u0026rdquo; and then fill in the rest of the options:\nServer URL - This is the Power Platform Environment you will have added your App registration to when setting up the App Registration for Power Platform. You can get the URL by navigating to your environment within Power Platform, clicking the settings cog at the top right, and then clicking \u0026ldquo;session details\u0026rdquo;. Tenant Id: Tenant ID of your App Registration Application Id: App ID (Client ID) of your App Registration Client Secret of Application ID: Secret generated when you created the App Registration Service Connection Name: Name of your connection. Name it something easy to remember and easy to reference. Ensure \u0026ldquo;Grant access permission to all pipelines\u0026rdquo; is ticked Step 5: Click \u0026ldquo;Save\u0026rdquo;. This will create the Service connection which can now be used within your pipelines. Now this is where the magic happens (and also where the docs aren\u0026rsquo;t very clear!), you can use this connection, and target any environment within your Power Platform Tenant, as long as you have added the app registration to them first. If you decide to automate Environmenet creation via the pipeline (and you should as it\u0026rsquo;s a big timesaver), it will actually automatically add the app registration to the created environment store the environment in a pipeline variable called BuildTools.EnvironmentUrl, which you can then use to automatr further tasks as part of an environment set-up and configuration. An exmaple of this could be to then import a solution so that it\u0026rsquo;s ready for developers.\nAn example of this pipeline could look like this:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 trigger: - none pool: vmImage: windows-latest steps: - task: PowerPlatformToolInstaller@2 inputs: DefaultVersion: true - task: PowerPlatformPackSolution@2 inputs: SolutionSourceFolder: \u0026#39;$(Build.SourcesDirectory)\\ExportedSolutions\\$(SolutionName)\u0026#39; SolutionOutputFile: \u0026#39;$(Build.ArtifactStagingDirectory)\\$(SolutionName)_Unmanaged.zip\u0026#39; SolutionType: \u0026#39;UnManaged\u0026#39; ProcessCanvasApps: true - task: PublishPipelineArtifact@1 inputs: targetPath: \u0026#39;$(Build.ArtifactStagingDirectory)\\$(SolutionName)_Unmanaged.zip\u0026#39; artifact: \u0026#39;Solution\u0026#39; publishLocation: \u0026#39;pipeline\u0026#39; - task: PowerPlatformCreateEnvironment@2 inputs: authenticationType: \u0026#39;PowerPlatformSPN\u0026#39; PowerPlatformSPN: \u0026#39;MyServiceConnection\u0026#39; DisplayName: \u0026#39;$(SolutionName)-$(Build.BuildId)\u0026#39; EnvironmentSku: \u0026#39;Sandbox\u0026#39; LocationName: \u0026#39;unitedkingdom\u0026#39; LanguageName: \u0026#39;English\u0026#39; CurrencyName: \u0026#39;GBP\u0026#39; DomainName: \u0026#39;$(SolutionName)-$(Build.BuildId)\u0026#39; - task: PowerPlatformImportSolution@2 inputs: authenticationType: \u0026#39;PowerPlatformSPN\u0026#39; PowerPlatformSPN: \u0026#39;MyServiceConenction\u0026#39; SolutionInputFile: \u0026#39;$(Build.ArtifactStagingDirectory)\\$(SolutionName)_Unmanaged.zip\u0026#39; AsyncOperation: true MaxAsyncWaitTime: \u0026#39;60\u0026#39; This pipeline is essentially doing what was mentioned above, but notice that the Environment isn\u0026rsquo;t specified in these tasks, just the Service Connection. This is a nice feature of the \u0026ldquo;Create Environment\u0026rdquo; task, which sets the \u0026ldquo;BuildTools.EnvironmentUrl\u0026rdquo; as an output so that the import task can be run against the newly created Environment. Neat!\nHow would this work for existing environments? Up until recently I was led to believe I would need a different service connection for each Envrionment I want to run tasks against. This is not the case however, as provided the service connection has access, you can just target the Environment as part of the pipeline settings, see this example here:\n1 2 3 4 5 6 7 8 9 - task: PowerPlatformExportSolution@2 inputs: authenticationType: \u0026#39;PowerPlatformSPN\u0026#39; PowerPlatformSPN: \u0026#39;MyServiceConnection\u0026#39; Environment: \u0026#39;$(EnvURL)\u0026#39; SolutionName: \u0026#39;$(SolutionName)\u0026#39; SolutionOutputFile: \u0026#39;$(Build.ArtifactStagingDirectory)\\$(SolutionName).zip\u0026#39; AsyncOperation: true MaxAsyncWaitTime: \u0026#39;60\u0026#39; Notice in the above export solution task how the Service Connection remains the same but an additional parameter names \u0026ldquo;Environment\u0026rdquo; is set with a pipeline variable which is defined on runtime to point to the Environemnt URL. This is a great way to quickly get set up and manage multiple environments, especially when managing them as part of an overall strategy where Environments are short lived for features/hotfixes as part of an overall branching strategy in Azure DevOps.\nI hope this has been useful and provides some insight on how you can begin to automate tasks as part of a healthy ALM set-up within the PowerPlatform.\n","date":"2023-02-28T00:00:00Z","image":"https://joshlgiles.com/p/understanding-service-connections-for-environments-in-power-platform-build-tools/Software_hu59b20b477dc8818f393e23d9da349009_101123_120x120_fill_q75_box_smart1.jpg","permalink":"https://joshlgiles.com/p/understanding-service-connections-for-environments-in-power-platform-build-tools/","title":"Understanding Service Connections for Environments in Power Platform Build tools"}]